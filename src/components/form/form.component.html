<div class="reactive-form" [formGroup]="createFormInfo">
  <h1>Reactive Forms Status</h1>

  <div class="generator-section" >
    <div class="generator">
      <div class="generator-header">Create Form Elements</div>

      <div class="generator-content">
        <div class="section-header">
          <span>Form Title</span>
        </div>
        <div class="section-contents">
          <label for="form-title">Title</label>
          <input type="text" id="form-title" formControlName="formTitle"/>
        </div>
      </div>

      <div class="generator-content">
        <div class="section-header">
          <span>Type</span>
        </div>
        <div class="section-contents">
          <ul>
            <li class="option">
              <input type="radio" id="type-input" [checked]="createFormInfo.get('formType')?.value === 'input'">
              <label class="cbx" for="type-input" (click)="selectFormTypeAsInput()">Input</label>
            </li>

            <li class="option">
              <input type="radio" id="type-checkBox" [checked]="createFormInfo.get('formType')?.value === 'checkbox'">
              <label class="cbx" for="type-checkBox" (click)="selectFormTypeAsCheckBox()">CheckBox</label>
            </li>

            <li class="option">
              <input type="radio" id="type-radio" [checked]="createFormInfo.get('formType')?.value === 'radio'">
              <label class="cbx" for="type-radio" (click)="selectFormTypeAsRadio()">Radio</label>
            </li>
          </ul>
        </div>
      </div>

      <!-- Input -->
      <div class="generator-content" formGroupName="formInfoByType" *ngIf="createFormInfo.get('formType')?.value === 'input'">
        <div class="section-header">
          <i class="fas fa-font"></i>
          <span>Input</span>
        </div>
        <div class="section-contents">
          <ul>
            <li>
              <span>*</span>
              <label for="label-text">Label</label>
              <input type="text" id="label-text" formControlName="labelName">
            </li>

            <li>
              <label for="label-text">Default Value</label>
              <input type="text" id="label-text" formControlName="defaultValueTxt">
            </li>

            <li>
              <label for="label-text">Place holder</label>
              <input type="text" id="label-text" formControlName="placeHolder">
            </li>
          </ul>
        </div>
        <div class="input-validation-options" formGroupName="validation">
          <p>Validation Settings</p>
          <ul>
            <li class="option">
              <input type="checkbox" id="required-input" [checked]="validationFormGroup.get('isRequired')?.value">
              <label class="cbx" for="required-input" (click)="checkRequired()">Required</label>
            </li>
            <li class="option">
              <input type="checkbox" id="read-only-input" [checked]="validationFormGroup.get('isReadOnly')?.value">
              <label class="cbx" for="read-only-input" (click)="checkReadOnly()">Read Only</label>
            </li>
            <li class="option length">
              <input type="checkbox" id="min-length" [checked]="validationFormGroup.get('minLength')?.value">
              <label class="cbx" for="min-length">Min Length</label>
              <input type="text" id="min-length" formControlName="minLength">
            </li>
            <li class="option length">
              <input type="checkbox" id="max-length" [checked]="validationFormGroup.get('maxLength')?.value">
              <label class="cbx" for="max-length">Max Length</label>
              <input type="text" id="max-length" formControlName="maxLength">
            </li>
          </ul>
        </div>
      </div>

      <!-- Checkbox -->
      <div class="generator-content" formGroupName="formInfoByType" *ngIf="createFormInfo.get('formType')?.value === 'checkbox'">
        <div class="section-header">
          <i class="far fa-check-square"></i>
          <span>CheckBox</span>
        </div>
        <div class="section-contents">
          <ul>
            <li>
              <span>*</span>
              <label for="label-text">Label</label>
              <input type="text" id="label-text" formControlName="labelName">
            </li>

            <li class="default">
              <p>Default Value</p>
              <div class="default-option">
                <input type="radio" id="checked-radio" [checked]="formInfoByType.get('isChecked')?.value">
                <label class="cbx" for="checked-radio">checked</label>
              </div>
              <div class="default-option">
                <input type="radio" id="unChecked-radio" [checked]="!formInfoByType.get('isChecked')?.value">
                <label class="cbx" for="unChecked-radio">unChecked</label>
              </div>
            </li>
          </ul>

        </div>
        <div class="validation-options">
          <p>Validation Settings</p>
          <ul>
            <li class="option">
              <input type="checkbox" id="required">
              <label class="cbx" for="required">Required</label>
            </li>
            <li class="option">
              <input type="checkbox" id="read-only">
              <label class="cbx" for="read-only">Read Only</label>
            </li>
          </ul>
        </div>
      </div>

      <!-- Radio -->
      <div class="generator-content" formGroupName="formInfoByType" *ngIf="createFormInfo.get('formType')?.value === 'radio'">
        <div class="section-header">
          <div class="circle"></div>
          <span>Radio</span>
        </div>
        <div class="section-contents">
          <ul>
            <li>
              <span>*</span>
              <label for="label-text">Label</label>
              <input type="text" id="label-text" formControlName="labelName">
            </li>

            <li class="default">
              <p>Default Value</p>
              <div class="default-option">
                <input type="radio" id="checked-radio" [checked]="formInfoByType.get('isChecked')?.value">
                <label class="cbx" for="checked-radio">checked</label>
              </div>
              <div class="default-option">
                <input type="radio" id="unChecked-radio" [checked]="!formInfoByType.get('isChecked')?.value">
                <label class="cbx" for="unChecked-radio">unChecked</label>
              </div>
            </li>
          </ul>

        </div>
        <div class="validation-options">
          <p>Validation Settings</p>
          <ul>
            <li class="option">
              <input type="checkbox" id="required">
              <label class="cbx" for="required">Required</label>
            </li>
            <li class="option">
              <input type="checkbox" id="read-only">
              <label class="cbx" for="read-only">Read Only</label>
            </li>
          </ul>
        </div>
      </div>
  
      <div class="generator-btn">
        <button (click)="createForm()">Generate</button>
      </div>
    </div>
  
    <div class="button-container">
      <p>Apply All</p>
      <button class="mark-btn" (click)="markAllAsTouched()">markAllAsTouched</button>
      <button class="disable-btn" (click)="disableForm()">disable</button>
      <button class="enable-btn" (click)="enableForm()">enable</button>
    </div>
  </div>

  <!-- 리스트 항목 -->
  <div class="form-list" [formGroup]="generatedForms">
    <ul class="test-form" formArrayName="forms">
      <li class="form-info" *ngFor="let form of forms.controls; let formIdx=index" >
        <div class="form-title" [formGroupName]="formIdx">
          {{ form.get('formTitle')?.value}}
          <div class="delete-btn" (click)="deleteForm(formIdx)"><i class="far fa-times-circle"></i></div>
        </div>

        <div class="form-content" [formGroupName]="formIdx">
          <div class="form-case">

            <div class="input-case test" *ngIf="form.get('formType')?.value === 'input'">
              <label for="test-input">{{form.get('formInfoByType')?.get('labelName')?.value}}</label>
              <input type="text" id="test-input" placeholder="{{form.get('formInfoByType')?.get('placeHolder')?.value}}" [value]="form.get('formInfoByType')?.get('defaultValueTxt')?.value">
            </div>

            <div class="checkbox-case test" *ngIf="form.get('formType')?.value === 'checkbox'">
              <input type="checkbox" id="test-checkbox">
              <label class="cbx" for="test-checkbox">{{form.get('formInfoByType')?.get('labelName')?.value}}</label>
            </div>

            <div class="radio-case test" *ngIf="form.get('formType')?.value === 'radio'">
              <input type="radio" id="test-radio">
              <label class="cbx" for="test-radio">{{form.get('formInfoByType')?.get('labelName')?.value}}</label>
            </div>
  
  
            <div class="status">
              <p class="title">STAUTS</p>
              <ul>
                <li *ngFor="let status of statusItems" 
                [ngClass]="{
                  'valid':form.get('formInfoByType')?.get('valueTxt')?.valid && status ==='valid', 
                  'invalid':form.get('formInfoByType')?.get('valueTxt')?.invalid && status ==='invalid',
                  'touched':form.get('formInfoByType')?.get('valueTxt')?.touched && status ==='touched',
                  'dirty':form.get('formInfoByType')?.get('valueTxt')?.dirty && status ==='dirty',
                  'pristine':form.get('formInfoByType')?.get('valueTxt')?.pristine && status ==='pristine',
                  'pending':form.get('formInfoByType')?.get('valueTxt')?.pending && status ==='pending'
                }">{{status}}</li>
              </ul>
            </div> 
          </div>
  
          
  
          <div class="validation-info">
            <p class="title">VALIDATION</p>
            <ng-container *ngIf="form.get('formInfoByType')?.get('validation')?.get('minLength')?.value"> 
              <p> Min Length : {{form.get('formInfoByType')?.get('validation')?.get('minLength')?.value}} </p>
            </ng-container>
            <ng-container *ngIf="form.get('formInfoByType')?.get('validation')?.get('maxLength')?.value"> 
              <p> Max Length : {{form.get('formInfoByType')?.get('validation')?.get('maxLength')?.value}}</p>
            </ng-container>
            <ng-container *ngIf="form.get('formInfoByType')?.get('validation')?.get('isRequired')?.value"> 
              <p>Required</p>
            </ng-container>
          </div>
        </div>
      </li>
    </ul>
  </div>
</div>


